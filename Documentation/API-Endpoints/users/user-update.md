# Update or Delete User

Allows an administrator to update (fully or partially) or delete a specific user identified by their primary key (pk).

## Endpoint URL

`/api/users/<int:pk>/update/`


Replace `<int:pk>` with the unique ID of the user you want to modify or delete.

## HTTP Methods

* `PUT`: Fully updates a user's details. All required fields in the serializer must be provided.
* `PATCH`: Partially updates a user's details. Only the fields to be changed need to be provided.
* `DELETE`: Deletes the specified user.

## Permissions

* **Requires Admin Privileges**: Yes
  * Only authenticated users who are administrators (e.g., `is_staff` or `is_superuser` is true) can access this endpoint.
  * If the request is made by a non-admin user, a `403 Forbidden` response will be returned.
  * If the request is made by an unauthenticated user, a `401 Unauthorized` response will be returned.

## URL Parameters

| Parameter | Type    | Required | Description                             |
| :-------- | :------ | :------- | :-------------------------------------- |
| `pk`      | Integer | Yes      | The unique identifier of the user.    |

## Request Headers

| Header        | Value                 | Required | Description                                                |
| :------------ | :-------------------- | :------- | :--------------------------------------------------------- |
| `Authorization` | `Bearer <access_token>` | Yes      | For token-based authentication.                            |
| `Content-Type`  | `application/json`    | Yes      | Required for `PUT` and `PATCH` methods to specify JSON body. |

---

## `PUT` - Full Update

Fully replaces the user resource with the provided data. All writable fields from the `UserSerializer` should be included.

**Request Body:**

The request body must be a JSON object containing all the user details to be updated. Based on `UserSerializer`, these typically include:

| Field      | Type          | Required | Description                                      |
| :--------- | :------------ | :------- | :----------------------------------------------- |
| `username` | String        | Yes      | The user's username. Must be unique.             |
| `email`    | String (Email)| Yes      | The user's email address. Must be unique.        |
| `groups`   | Array of URLs | Yes      | List of group URLs the user belongs to. Can be empty. |

*Note: `url` and `profile_url` are typically read-only and generated by the server.*

**Example `PUT` Request Body:**

```json
{
    "username": "updatedUser",
    "email": "updated.user@example.com",
    "groups": [
        "/api/groups/1/"
    ]
}
```

**Successful `PUT` Response:**

**Status Code:** `200 OK`

The response will contain the full JSON object of the updated user.

**Example `PUT` JSON Response:**

```json
{
    "url": "/api/users/1/",
    "profile_url": "/api/users/1/profile/",
    "username": "updatedUser",
    "email": "updated.user@example.com",
    "groups": [
        "/api/groups/1/"
    ]
}
```

---

## `PATCH` - Partial Update

Partially updates the user resource. Only include the fields in the request body that you want to change.

**Request Body:**

The request body must be a JSON object containing the specific user details to be updated.

**Example `PATCH` Request Body (updating only email):**

```json
{
    "email": "new.email.for.user@example.com"
}
```

**Successful `PATCH` Response:**

**Status Code:** `200 OK`

The response will contain the full JSON object of the updated user.

**Example `PATCH` JSON Response (after updating email):**

```json
{
    "url": "/api/users/1/",
    "profile_url": "/api/users/1/profile/",
    "username": "originalUsername",
    "email": "new.email.for.user@example.com",
    "groups": [
        "/api/groups/1/"
    ]
}
```

---

## `DELETE` - Delete User

Deletes the specified user account.

**Request Body:**

No request body is required for a `DELETE` request.

**Successful `DELETE` Response:**

**Status Code:** `204 No Content`

The response body will be empty.

---

## Common Error Responses

* **Status Code:** `400 Bad Request`
  * **Reason (for `PUT`/`PATCH`):** The provided data is invalid (e.g., missing required fields for `PUT`, invalid email format, username/email already taken by another user).
  * **Response Body (Example - Username taken):**

```json
{
    "username": [
        "A user with that username already exists."
    ]
}
```

* **Status Code:** `401 Unauthorized`
  * **Reason:** Authentication credentials were not provided or were invalid.
  * **Response Body:**

```json
{
    "detail": "Authentication credentials were not provided."
}
```

* **Status Code:** `403 Forbidden`
  * **Reason:** The authenticated user is not an administrator.
  * **Response Body:**

```json
{
    "detail": "You do not have permission to perform this action."
}
```

* **Status Code:** `404 Not Found`
  * **Reason:** A user with the specified `pk` does not exist.
  * **Response Body:**

```json
{
    "detail": "Not found."
}
```
